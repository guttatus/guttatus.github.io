+++
author = "guttatus"
title = "跨过那个时钟域(2)"
date = "2023-08-23"
description = "浅谈数字电路设计中多比特信号跨时钟域的同步处理方法"
tags = [
    "CDC",
]
categories = [
    "IC",
]
toc = true
autonumbering = true
+++

## 多比特信号跨时钟域的同步处理方法
当在时钟域间传递多比特信号时，简单的同步器无法保证数据被安全地传递。多比特跨时钟域的主要问题在与：在将多比特信号从一个时钟域同步到另一个时钟域时，可能出现偶发的数据变化偏斜（data changing skew），这种偏斜最终在第二个时钟域的不同上升沿被采样。即使能完美地控制和匹配这些多比特信号的走线长度，上升和下降时间的差异以及整个模具的工艺变化都可能会引入足够的偏斜，从而导致在精心匹配的多条信号上采样失败。

为了避免多比特信号跨时钟域采样偏斜，主要有三类同步策略：
1. 多比特信号融合策略：尽可能地将多比特信号跨时钟域融合为单比特信号跨时钟域。
2. 多周期路径规划策略：时钟同步加载信号（synchronized load signal）安全地传递多比特跨时钟域信号。
3. 使用[格雷码](https://guttatus.github.io/post/gray-code/)传递多比特跨时钟域信号。

   
### 多比特融合策略
尽可能地多比特信号跨时钟域融合为单比特信号跨时钟域。当在设计中遇到多比特跨时钟域时，我们应该考虑清楚是否真的需要多比特信号来控制逻辑跨过时钟域边界。

下面将通过一些简单的实例来说明为什么简单的使用同步器来同步多比特跨时钟域信号不是好的解决方案。如果控制信号的顺序或排列对设计来说非常重要，那么设计者必须小心地将这些信号同步到接收时钟域。

#### 实例1 -- 两个同时需要的控制信号